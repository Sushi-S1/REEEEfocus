<!DOCTYPE html>
<html lang="en">

<head>
    <title>ReFocus</title>


    <script src="https://www.gstatic.com/firebasejs/5.8.0/firebase.js"></script>
    <script src="https://unpkg.com/vue-firestore"></script>
    <link href="http://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/vue/2.5.22/vue.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/vuetify/dist/vuetify.js"></script>
    <link href="https://cdn.jsdelivr.net/npm/vuetify/dist/vuetify.min.css" rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.4.0/Chart.min.js"></script>

</head>

<body>

    <div id="app_">

            <div>
            <div class="row">
                <div class="col s12 m12">
                    <div class="carousel carousel-slider center">
                        <div class="carousel-item red white-text" href="#one!" v-for="item in Programs" >
                            <h2>{{ item.name }}</h2>
                            <p class="white-text">This is your first panel</p>
                        </div>
                    </div>
                </div>
            </div>
    </div>
    <div class="row">
        <!-- Modal Trigger -->
        <center>
            <button class="btn-floating btn-large waves-effect waves-light red modal-trigger" data-target="modal1" href="#modal1"><i class="material-icons">add</i></a>
        </center>

        <!-- Modal Structure -->
        <div id="modal1" class="modal">
            <div class="modal-content">
                <h4>Refocus yourself</h4>
                <p>Website or Desktop App</p>
                <div class="switch">
                    <label>
                        Site
                        <input type="checkbox" v-model="checked">
                        <span class="lever"></span> App
                    </label>
                </div>
                <div class="input-field inline">
                        <p> Name:</p>
                        <input id="email_inline" class="validate" v-model="name">
                    </div>
                <div class="row">
                    <div class="col s6">
                        <p> Daily Allowance:</p>
                        <div class="input-field inline">
                            <input id="email_inline" class="validate" v-model.number="allowance">
                        </div>
                    </div>
                    <div class="col s6" v-show="!checked">
                        Blocked Website:
                        <div class="input-field inline">
                            <input id="email_inline" class="validate" v-model="application">
                        </div>
                      </div>
                    <div class="col s6" v-show="checked">
                        Blocked Application:
                        <div class="input-field inline">
                            <!--<input id="email_inline" type="file" class="validate" v-model="application">-->
                        </div>
                    </div>

                    <div class="row">
                        <div class="col s12">
                            What would you like to focus on?
                            <div class="input-field inline"></div>
                            <input id="email_inline" class="validate" v-model="redirect">
                        </div>
                    </div>
                </div>

                <div class="modal-footer">
                    <button href="#!" class="modal-close waves-effect waves-green btn-flat" @click='addProgram'>Agree</button>
                </div>


        </div>
    </div>
    </div>
    </div>
    <canvas id="myChart" width="400" height="400"></canvas>
<script>
var ctx = document.getElementById("myChart").getContext('2d');
var myChart = new Chart(ctx, {
    type: 'bar',
    data: {
        labels: ["1/20/19", "1/21/19", "1/23/19", "1/24/19", "1/25/19", "1/26/19"],
        datasets: [{
            label: '# of hours',
            data: [4, 4, 3, 2, 2, 3],
            backgroundColor: [
                'rgba(255, 99, 132, 0.2)',
                'rgba(54, 162, 235, 0.2)',
                'rgba(255, 206, 86, 0.2)',
                'rgba(75, 192, 192, 0.2)',
                'rgba(153, 102, 255, 0.2)',
                'rgba(255, 159, 64, 0.2)'
            ],
            borderColor: [
                'rgba(255,99,132,1)',
                'rgba(54, 162, 235, 1)',
                'rgba(255, 206, 86, 1)',
                'rgba(75, 192, 192, 1)',
                'rgba(153, 102, 255, 1)',
                'rgba(255, 159, 64, 1)'
            ],
            borderWidth: 1
        }]
    },
    options: {
        scales: {
            yAxes: [{
                ticks: {
                    beginAtZero:true
                }
            }]
        }
    }
});
</script>
</body>

<script>

   // Initialize Firebase
   var config = {
    apiKey: "AIzaSyBPe11i2mdwRZFxOv1sxGAkh2jPtvVWh5s",
    authDomain: "ultimaterefocus.firebaseapp.com",
    databaseURL: "https://ultimaterefocus.firebaseio.com",
    projectId: "ultimaterefocus",
    storageBucket: "ultimaterefocus.appspot.com",
    messagingSenderId: "321167424846"
  };
  firebase.initializeApp(config);
  var db = firebase.firestore();
  var app = new Vue({
    el: '#app_',
    created: function(){
        var self = this;
       db.collection("ReFocus").get().then(function(qS){
            qS.forEach(function(doc){
               self.Programs.push(doc.data())
            })
        })
    },
    data: {

        Programs: [],
        name: '',
        checked: 'true',
        allowance: '',
        application: '',
        redirect: ''

    },
    methods: {
      addProgram: function() {
        db.collection("ReFocus").add(
          {
            name: this.name,
            app: this.application,
            redir: this.redirect,
            allowance: this.allowance
          }
        );
        this.nameof= '';
        this.application= '';
        this.redirect= '';
      },
      deletePrograms: function(Programs) {
        Programs.doc(Programs['.key']).delete();
      }
    }


});

</script>

</html>
